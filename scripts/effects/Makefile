best_config_csvs:
	@echo " "
	@echo "  Run BenchExec on all possible combinations of parameters for Drift and evDrift."
	@echo "  The results are best_configs_drift.csv and best_configs_evdrift.csv"
	@echo "  "
	@echo "  WARNING: This may take many hours and consume many resources."
	@echo "  "
	@echo "  If you would really like to do this, edit scripts/effects/benchexec.cfg"
	@echo "  to suit your machine, and then comment out 'exit' in scripts/effects/Makefile"
	@echo " "
#	exit 1
	perl makeYamls.pl
	perl makeRunDefinitions.pl
	benchexec benchmark-drift-autogenerated.xml @benchexec.cfg
	benchexec benchmark-evdrift-autogenerated.xml @benchexec.cfg
	@echo "  "
	@echo "  BenchExec completed. You now must harvest the results in two steps:"
	@echo " "
	@echo "    1. Go into scripts/effects/ and run the TWO \"table-generator\" commands"
	@echo "       as instructed by BenchExec above."
	@echo "  "
	@echo "       Note: there are two commands to run above, one for Drift, one for evDrift."
	@echo "  "
	@echo "    2. Go into scripts/effects/ and run:"
	@echo "  "
	@echo "            perl makeBestConfigs.pl (names of the TWO generated .table.csv file above) "
	@echo "  "
	@echo "    3. Copy the resulting best_configs_[ev]drift.csvs into the root folder."
	@echo "  "
 
best_trace_part_configs:
	perl makeTracePart.pl `ls -t results/results.202*.table.csv | head -n 1`

precise:
	perl makeYamls.pl
	benchexec benchmark-driftwrapper.xml @benchexec.cfg
	benchexec benchmark-coarmochi.xml @benchexec.cfg
	benchexec benchmark-mochi.xml @benchexec.cfg
	benchexec benchmark-rethfl.xml @benchexec.cfg
	@echo " "
	@echo "  BenchExec complete for Drift, evDrift, RCaml, Mochi, and Rethfl."
	@echo "  Now parse the results by typing:"
	@echo " "
	@echo "      make precise_results"
	@echo " "

precise_results:
	# Run the BenchExec table generator for the most recently generated
	table-generator `ls -t results/benchmark-rethfl.202*.xml.bz2 | head -n 1`
	table-generator `ls -t results/benchmark-coarmochi.202*.xml.bz2 | head -n 1`
	table-generator `ls -t results/benchmark-mochi.202*.xml.bz2 | head -n 1`
	table-generator `ls -t results/benchmark-driftwrapper.202*results.drift-best.drifttasks.xml.bz2 | head -n 1`
	table-generator `ls -t results/benchmark-driftwrapper.202*results.evdrift-best.drifttasks.xml.bz2 | head -n 1`
	# Run makeLatex on the most recent 4 CSVs
	echo "`ls -t results/benchmark-rethfl.202*.csv | head -n 1`" > csvs.txt
	echo "`ls -t results/benchmark-coarmochi.202*.csv | head -n 1`" >> csvs.txt
	echo "`ls -t results/benchmark-mochi.202*.csv | head -n 1`" >> csvs.txt
	echo "`ls -t results/benchmark-driftwrapper.202*.results.drift-best.drifttasks.csv | head -n 1`" >> csvs.txt
	echo "`ls -t results/benchmark-driftwrapper.202*.results.evdrift-best.drifttasks.csv | head -n 1`" >> csvs.txt
	perl makePreciseResults.pl csvs.txt
	@echo " "
	@echo "  Tables are now generated. See exp-body.tex"
	@echo " "

